query GetPools(
  $token0Id: Bytes!
  $token1Id: Bytes!
  $hourlyDataStartTimestamp: BigInt!
  $dailyDataStartTimestamp: BigInt!
  $minTVLUSD: BigDecimal!
) {
  pools(
    where: {
      or: [
        {
          token0_: { id: $token0Id }
          token1_: { id: $token1Id }
          totalValueLockedUSD_gt: $minTVLUSD
        }
        {
          token0_: { id: $token1Id }
          token1_: { id: $token0Id }
          totalValueLockedUSD_gt: $minTVLUSD
        }
      ]
    }
  ) {
    id
    protocol {
      name
      logo
      url
      id
      positionManager
    }
    totalValueLockedUSD
    feeTier
    tickSpacing
    token0 {
      id
      name
      symbol
      decimals
    }
    token1 {
      id
      name
      symbol
      decimals
    }
    dailyData(
      orderDirection: desc
      orderBy: dayStartTimestamp
      where: { dayStartTimestamp_gte: $dailyDataStartTimestamp }
    ) {
      feesUSD
      totalValueLockedUSD
    }
    hourlyData(
      orderDirection: desc
      orderBy: hourStartTimestamp
      where: { hourStartTimestamp_gte: $hourlyDataStartTimestamp }
    ) {
      feesUSD
    }
  }
}
